<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Enterprise-grade competitive dice rolling platform with provable fairness">
  <meta name="theme-color" content="#4f46e5">
  
  <title>Competitive Dice Platform</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  
  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-32x32.png">
  
  <!-- Apple Touch Icon -->
  <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
  
  <!-- Stylesheet -->
  <link rel="stylesheet" href="/styles.css">
  
  <!-- Cloudflare Turnstile -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
  <!-- App container -->
  <div id="app">
    <!-- Header -->
    <header class="header" role="banner">
      <div class="container">
        <div class="header-content">
          <h1 class="logo">
            <span aria-hidden="true">üé≤</span>
            <span>Dice Platform</span>
          </h1>
          <nav class="nav" role="navigation" aria-label="Main navigation">
            <button id="theme-toggle" class="btn btn-ghost" aria-label="Toggle theme">
              <span class="theme-icon theme-icon-light" aria-hidden="true">‚òÄÔ∏è</span>
              <span class="theme-icon theme-icon-dark" aria-hidden="true">üåô</span>
            </button>
          </nav>
        </div>
      </div>
    </header>
    
    <!-- Main content -->
    <main class="main" role="main">
      <div class="container">
        <!-- Welcome section -->
        <section id="welcome-section" class="section">
          <div class="card card-elevated">
            <div class="card-content">
              <h2 class="section-title">Welcome to Competitive Dice Platform</h2>
              <p class="section-description">
                Experience provably fair dice rolling with enterprise-grade security,
                real-time multiplayer, and transparent fairness verification.
              </p>
              
              <!-- Registration form -->
              <form id="registration-form" class="form">
                <div class="form-group">
                  <label for="player-id" class="form-label">Player ID</label>
                  <input
                    type="text"
                    id="player-id"
                    name="playerId"
                    class="form-input"
                    placeholder="Enter your player ID"
                    required
                    minlength="3"
                    maxlength="64"
                    pattern="[a-zA-Z0-9_-]+"
                    aria-describedby="player-id-help"
                  >
                  <small id="player-id-help" class="form-help">
                    3-64 characters, alphanumeric, hyphens, and underscores only
                  </small>
                </div>
                
                <!-- Turnstile widget placeholder -->
                <div class="form-group">
                  <div id="turnstile-widget" class="cf-turnstile"></div>
                </div>
                
                <button type="submit" class="btn btn-primary btn-lg" id="register-btn">
                  Register & Start Playing
                </button>
              </form>
            </div>
          </div>
        </section>
        
        <!-- Game section (hidden by default) -->
        <section id="game-section" class="section" style="display: none;">
          <div class="grid grid-cols-2">
            <!-- Game room card -->
            <div class="card card-elevated">
              <div class="card-header">
                <h3 class="card-title">Game Room</h3>
                <span id="room-status" class="badge badge-info">Pending</span>
              </div>
              <div class="card-content">
                <div class="game-info">
                  <div class="info-item">
                    <span class="info-label">Room ID:</span>
                    <span id="room-id" class="info-value">-</span>
                  </div>
                  <div class="info-item">
                    <span class="info-label">Players:</span>
                    <span id="player-count" class="info-value">0</span>
                  </div>
                  <div class="info-item">
                    <span class="info-label">Total Rolls:</span>
                    <span id="total-rolls" class="info-value">0</span>
                  </div>
                </div>
                
                <div class="game-actions">
                  <button id="create-room-btn" class="btn btn-primary">Create Room</button>
                  <button id="join-room-btn" class="btn btn-secondary" disabled>Join Room</button>
                  <button id="commit-btn" class="btn btn-secondary" disabled>Commit</button>
                  <button id="reveal-btn" class="btn btn-secondary" disabled>Reveal</button>
                  <button id="roll-btn" class="btn btn-primary btn-lg" disabled>Roll Dice</button>
                </div>
                
                <div id="roll-result" class="roll-result" style="display: none;">
                  <div class="dice-display" aria-live="polite" aria-atomic="true">
                    <span id="dice-value" class="dice-value">-</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Fairness status card -->
            <div class="card card-elevated">
              <div class="card-header">
                <h3 class="card-title">Fairness Status</h3>
                <span id="fairness-badge" class="badge badge-success">Normal</span>
              </div>
              <div class="card-content">
                <div class="fairness-info">
                  <div class="fairness-bar">
                    <div class="fairness-bar-fill" id="fairness-bar" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
                  
                  <div class="distribution">
                    <h4 class="distribution-title">Roll Distribution</h4>
                    <div class="distribution-chart">
                      <div class="distribution-item" data-value="1">
                        <span class="distribution-label">1</span>
                        <div class="distribution-bar-container">
                          <div class="distribution-bar" id="dist-1"></div>
                        </div>
                        <span class="distribution-count" id="count-1">0</span>
                      </div>
                      <div class="distribution-item" data-value="2">
                        <span class="distribution-label">2</span>
                        <div class="distribution-bar-container">
                          <div class="distribution-bar" id="dist-2"></div>
                        </div>
                        <span class="distribution-count" id="count-2">0</span>
                      </div>
                      <div class="distribution-item" data-value="3">
                        <span class="distribution-label">3</span>
                        <div class="distribution-bar-container">
                          <div class="distribution-bar" id="dist-3"></div>
                        </div>
                        <span class="distribution-count" id="count-3">0</span>
                      </div>
                      <div class="distribution-item" data-value="4">
                        <span class="distribution-label">4</span>
                        <div class="distribution-bar-container">
                          <div class="distribution-bar" id="dist-4"></div>
                        </div>
                        <span class="distribution-count" id="count-4">0</span>
                      </div>
                      <div class="distribution-item" data-value="5">
                        <span class="distribution-label">5</span>
                        <div class="distribution-bar-container">
                          <div class="distribution-bar" id="dist-5"></div>
                        </div>
                        <span class="distribution-count" id="count-5">0</span>
                      </div>
                      <div class="distribution-item" data-value="6">
                        <span class="distribution-label">6</span>
                        <div class="distribution-bar-container">
                          <div class="distribution-bar" id="dist-6"></div>
                        </div>
                        <span class="distribution-count" id="count-6">0</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="commitment-status">
                    <h4>Commitment Status</h4>
                    <span id="commitment-status" class="badge badge-secondary">Not Committed</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Events log -->
          <div class="card card-elevated">
            <div class="card-header">
              <h3 class="card-title">Recent Events</h3>
            </div>
            <div class="card-content">
              <div id="events-log" class="events-log" role="log" aria-live="polite">
                <p class="text-muted">No events yet</p>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>
    
    <!-- Footer -->
    <footer class="footer" role="contentinfo">
      <div class="container">
        <p class="footer-text">
          &copy; 2024 Competitive Dice Platform. 
          <a href="#" class="footer-link">Privacy Policy</a> | 
          <a href="#" class="footer-link">Terms of Service</a>
        </p>
      </div>
    </footer>
  </div>
  
  <!-- Toast notifications -->
  <div id="toast-container" class="toast-container" role="status" aria-live="polite"></div>
  
  <!-- Loading overlay -->
  <div id="loading-overlay" class="loading-overlay" style="display: none;">
    <div class="spinner spinner-lg spinner-white"></div>
    <p class="loading-text">Loading...</p>
  </div>
  
  <!-- Application script -->
  <script type="module" src="/app.js"></script>
  
  <!-- Service Worker registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('SW registered:', registration);
          })
          .catch(error => {
            console.log('SW registration failed:', error);
          });
      });
    }
  </script>
</body>
</html>
